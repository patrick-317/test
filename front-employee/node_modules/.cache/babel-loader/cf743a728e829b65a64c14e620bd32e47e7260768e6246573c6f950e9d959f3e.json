{"ast":null,"code":"import React,{useState,useEffect}from'react';import{getInsuranceRequests,approveInsuranceRequest,rejectInsuranceRequest}from'../api/api.js';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ManageSubscriptions=()=>{const[requests,setRequests]=useState([]);// 요청 목록\nconst[selectedRequest,setSelectedRequest]=useState(null);// 선택된 요청\n// 보험 가입 요청 조회\nconst fetchRequests=async()=>{try{const response=await getInsuranceRequests();// API 호출\nsetRequests(response);// 요청 목록 업데이트\n}catch(error){console.error('Failed to fetch requests:',error);alert('보험 가입 요청 조회에 실패했습니다.');}};// 승인 처리\nconst handleApprove=async requestId=>{try{await approveInsuranceRequest(requestId);// 승인 API 호출\nalert('가입 요청이 승인되었습니다.');fetchRequests();// 요청 목록 갱신\n}catch(error){console.error('Failed to approve request:',error);alert('가입 요청 승인에 실패했습니다.');}};// 거절 처리\nconst handleReject=async requestId=>{try{await rejectInsuranceRequest(requestId);// 거절 API 호출\nalert('가입 요청이 거절되었습니다.');fetchRequests();// 요청 목록 갱신\n}catch(error){console.error('Failed to reject request:',error);alert('가입 요청 거절에 실패했습니다.');}};// 컴포넌트 마운트 시 요청 목록 조회\nuseEffect(()=>{fetchRequests();},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uBCF4\\uD5D8 \\uAC00\\uC785 \\uAD00\\uB9AC\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uAC00\\uC785 \\uC694\\uCCAD \\uBAA9\\uB85D\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\uC694\\uCCAD ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uACE0\\uAC1D ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uBCF4\\uD5D8 ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uAC00\\uC785 \\uB0A0\\uC9DC\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uC6D4 \\uB0A9\\uC785\\uAE08\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uC0C1\\uD0DC\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uC561\\uC158\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:requests.map(request=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:request.id}),/*#__PURE__*/_jsx(\"td\",{children:request.customerId}),/*#__PURE__*/_jsx(\"td\",{children:request.insuranceId}),/*#__PURE__*/_jsx(\"td\",{children:request.contractDate}),/*#__PURE__*/_jsx(\"td\",{children:request.premium}),/*#__PURE__*/_jsx(\"td\",{children:request.contractStatus}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedRequest(request),children:\"\\uC0C1\\uC138 \\uBCF4\\uAE30\"})})]},request.id))})]})]}),selectedRequest&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uC694\\uCCAD \\uC0C1\\uC138\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uC694\\uCCAD ID:\"}),\" \",selectedRequest.id]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uACE0\\uAC1D ID:\"}),\" \",selectedRequest.customerId]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uBCF4\\uD5D8 ID:\"}),\" \",selectedRequest.insuranceId]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uAC00\\uC785 \\uB0A0\\uC9DC:\"}),\" \",selectedRequest.contractDate]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uC6D4 \\uB0A9\\uC785\\uAE08:\"}),\" \",selectedRequest.premium]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uC0C1\\uD0DC:\"}),\" \",selectedRequest.contractStatus]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleApprove(selectedRequest.id),children:\"\\uC2B9\\uC778\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleReject(selectedRequest.id),children:\"\\uAC70\\uC808\"})]})]});};export default ManageSubscriptions;","map":{"version":3,"names":["React","useState","useEffect","getInsuranceRequests","approveInsuranceRequest","rejectInsuranceRequest","jsx","_jsx","jsxs","_jsxs","ManageSubscriptions","requests","setRequests","selectedRequest","setSelectedRequest","fetchRequests","response","error","console","alert","handleApprove","requestId","handleReject","children","map","request","id","customerId","insuranceId","contractDate","premium","contractStatus","onClick"],"sources":["/Users/patrick/git/test/front-employee/src/pages/ManageSubscriptions.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { getInsuranceRequests, approveInsuranceRequest, rejectInsuranceRequest } from '../api/api.js';\n\nconst ManageSubscriptions = () => {\n  const [requests, setRequests] = useState([]); // 요청 목록\n  const [selectedRequest, setSelectedRequest] = useState(null); // 선택된 요청\n\n  // 보험 가입 요청 조회\n  const fetchRequests = async () => {\n    try {\n      const response = await getInsuranceRequests(); // API 호출\n      setRequests(response); // 요청 목록 업데이트\n    } catch (error) {\n      console.error('Failed to fetch requests:', error);\n      alert('보험 가입 요청 조회에 실패했습니다.');\n    }\n  };\n\n  // 승인 처리\n  const handleApprove = async (requestId) => {\n    try {\n      await approveInsuranceRequest(requestId); // 승인 API 호출\n      alert('가입 요청이 승인되었습니다.');\n      fetchRequests(); // 요청 목록 갱신\n    } catch (error) {\n      console.error('Failed to approve request:', error);\n      alert('가입 요청 승인에 실패했습니다.');\n    }\n  };\n\n  // 거절 처리\n  const handleReject = async (requestId) => {\n    try {\n      await rejectInsuranceRequest(requestId); // 거절 API 호출\n      alert('가입 요청이 거절되었습니다.');\n      fetchRequests(); // 요청 목록 갱신\n    } catch (error) {\n      console.error('Failed to reject request:', error);\n      alert('가입 요청 거절에 실패했습니다.');\n    }\n  };\n\n  // 컴포넌트 마운트 시 요청 목록 조회\n  useEffect(() => {\n    fetchRequests();\n  }, []);\n\n  return (\n    <div>\n      <h1>보험 가입 관리</h1>\n      {/* 보험 가입 요청 테이블 */}\n      <div>\n        <h2>가입 요청 목록</h2>\n        <table>\n          <thead>\n            <tr>\n              <th>요청 ID</th>\n              <th>고객 ID</th>\n              <th>보험 ID</th>\n              <th>가입 날짜</th>\n              <th>월 납입금</th>\n              <th>상태</th>\n              <th>액션</th>\n            </tr>\n          </thead>\n          <tbody>\n            {requests.map((request) => (\n              <tr key={request.id}>\n                <td>{request.id}</td>\n                <td>{request.customerId}</td>\n                <td>{request.insuranceId}</td>\n                <td>{request.contractDate}</td>\n                <td>{request.premium}</td>\n                <td>{request.contractStatus}</td>\n                <td>\n                  <button onClick={() => setSelectedRequest(request)}>상세 보기</button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n\n      {/* 선택된 요청 상세 보기 */}\n      {selectedRequest && (\n        <div>\n          <h2>요청 상세</h2>\n          <p><strong>요청 ID:</strong> {selectedRequest.id}</p>\n          <p><strong>고객 ID:</strong> {selectedRequest.customerId}</p>\n          <p><strong>보험 ID:</strong> {selectedRequest.insuranceId}</p>\n          <p><strong>가입 날짜:</strong> {selectedRequest.contractDate}</p>\n          <p><strong>월 납입금:</strong> {selectedRequest.premium}</p>\n          <p><strong>상태:</strong> {selectedRequest.contractStatus}</p>\n          <button onClick={() => handleApprove(selectedRequest.id)}>승인</button>\n          <button onClick={() => handleReject(selectedRequest.id)}>거절</button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ManageSubscriptions;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}